{% extends 'estrutura/base.html' %}
{% block conteudo %}
{% include 'estrutura/header.html' %}
<div class="page-wrapper">
  <!-- Page header -->
  <div class="page-header d-print-none">
    <div class="container-xl">
      <div class="row g-2 align-items-center">
        <div class="col">
          <!-- Page pre-title -->
          <div class="page-pretitle">
            TICKET
          </div>
          <h2 class="page-title">
            Cadastrar
          </h2>
        </div>
      </div>
    </div>
  </div>

  <!-- Page body -->
  <div class="page-body">
    <div class="container-xl">

      {% include 'estrutura/mensagens_flash.html' %}

      {% if solicitacao %}
      <div class="row mb-4">
        <div class="col-md-12">
          <div class="card border border-primary shadow-sm">
            <div class="card-body">
              <h3 class="card-title mb-3 text-primary">Informações da
                Solicitação</h3>
              <div class="row">
                <div class="col-sm-12 col-md-6">
                  <div class="mb-3">
                    <label class="form-label">Cliente</label>
                    <input type="text" class="form-control" value="{{ solicitacao.cliente.identificacao }}" disabled>
                  </div>
                </div>
                <div class="col-sm-12 col-md-2">
                  <div class="mb-3">
                    <label class="form-label">Produto</label>
                    <input type="text" class="form-control" value="{{ solicitacao.produto.nome }}" disabled>
                  </div>
                </div>
                <div class="col-sm-12 col-md-2">
                  <div class="mb-3">
                    <label class="form-label">Bitola</label>
                    <input type="text" class="form-control" value="{{ solicitacao.bitola.bitola }}" disabled>
                  </div>
                </div>
                <div class="col-sm-12 col-md-2">
                  <div class="mb-3">
                    <label class="form-label">Número NF</label>
                    <input type="text" class="form-control" value="{{ registroOperacional.numero_nota_fiscal }}"
                      disabled>
                  </div>
                </div>
              </div>
              <h3 class="card-title mb-3 text-primary">Informações da
                transportadora</h3>
              <div class="row">
                <div class="col-sm-12 col-md-4">
                  <div class="mb-3">
                    <label class="form-label">Transportadora</label>
                    <input type="text" class="form-control"
                      value="{{ solicitacao.transportadora_exibicao.identificacao }}" disabled>
                  </div>
                </div>
                <div class="col-sm-12 col-md-2">
                  <div class="mb-3">
                    <label class="form-label">{%if
                      solicitacao.transportadora_exibicao.numero_documento |
                      length == 11%}CPF{%else%}CNPJ{%endif%}</label>
                    <input type="text" class="form-control cpfCnpj"
                      value="{{ solicitacao.transportadora_exibicao.numero_documento }}" disabled>
                  </div>
                </div>
                <div class="col-sm-12 col-md-2">
                  <div class="mb-3">
                    <label class="form-label">Telefone</label>
                    <input type="text"
                      class="form-control {% if solicitacao.transportadora_exibicao.telefone | length == 11%} celular {%else%}telefone{%endif%}"
                      value="{{ solicitacao.transportadora_exibicao.telefone }}" disabled>
                  </div>
                </div>
                <div class="col-sm-12 col-md-2">
                  <div class="mb-3">
                    <label class="form-label">Motorista</label>
                    <input type="text" class="form-control"
                      value="{{ solicitacao.motorista.nome_completo | truncate(15, true, '...') }}" disabled>
                  </div>
                </div>

                <div class="col-sm-12 col-md-2">
                  <div class="mb-3">
                    <label class="form-label">Placa</label>
                    <input type="text" class="form-control" value="{{ solicitacao.veiculo.placa_veiculo }}" disabled>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% endif %}

      <div class="col-12">
        <form class="card" action="{{ url_for('cadastrar_ticket', id=solicitacao.id) }}" method="POST"
          enctype="multipart/form-data">
          <div class="card-body">
            <div class="row">
              <div class="col-sm-3 col-md-3 grupoFornecedor">
                <div class="mb-3">
                  <label class="form-label required">Fornecedor/Floresta</label>
                  <select type="text" name="fornecedorIdentificacao" id="fornecedorIdentificacao"
                    value="{{ dados_corretos['fornecedorIdentificacao'] }}" class="form-select {% if 'fornecedorIdentificacao' in campos_obrigatorios or 'fornecedorIdentificacao' in campos_erros %}
                                                is-invalid
                                            {% endif %}">
                    <option value selected>Selecione...</option>
                    <option value="0">NÃO IDENTIFICADA</option>
                    {% for f in fornecedores %}
                    <option value="{{f.id}}">{{f.identificacao}}</option>
                    {% endfor %}
                  </select>
                  <div class="invalid-feedback">
                    {% if 'fornecedorIdentificacao' in
                    campos_obrigatorios %}
                    {{
                    campos_obrigatorios['fornecedorIdentificacao']
                    }}
                    {% elif 'fornecedorIdentificacao' in
                    campos_erros
                    %}
                    {{ campos_erros['fornecedorIdentificacao']
                    }}
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-2 col-md-2">
                <div class="mb-3">
                  <label class="form-label required">Número NF Ticket</label>
                  <input type="text" name="numeroNf" value="{{ dados_corretos['numeroNf'] }}"
                    class="form-control {% if 'numeroNf' in campos_obrigatorios %}is-invalid{% endif %}">
                  <div class="invalid-feedback">
                    {% if 'numeroNf' in
                    campos_obrigatorios
                    %}
                    {{ campos_obrigatorios['numeroNf'] }}
                    {% elif 'numeroNf' in campos_erros %}
                    {{ campos_erros['numeroNf'] }}
                    {% endif %}
                  </div>
                </div>
              </div>
              <div class="col-sm-2 col-md-3">
                <div class="mb-3">
                  <label class="form-label required">Peso líquido (Ton.)</label>
                  <input type="text" name="pesoLiquido" value="{{ dados_corretos['pesoLiquido'] }}"
                    class="form-control campo-float {% if 'pesoLiquido' in campos_obrigatorios %}is-invalid{% endif %}">
                  <div class="invalid-feedback">
                    {% if 'pesoLiquido' in
                    campos_obrigatorios
                    %}
                    {{ campos_obrigatorios['pesoLiquido'] }}
                    {% elif 'pesoLiquido' in campos_erros %}
                    {{ campos_erros['pesoLiquido'] }}
                    {% endif %}
                  </div>
                  <p class="mb-0 text-warning" style="font-size: 0.8125rem;">
                    <strong>Importante:</strong> Verifique o peso antes de cadastrar o ticket.
                  </p>
                </div>
              </div>
              <div class="col-sm-3 col-md-3">
                <div class="mb-3">
                  <label class="form-label required">Placa</label>
                  <input type="text" name="placaVeiculo" value="{{ solicitacao.veiculo.placa_veiculo }}"
                    class="form-control {% if 'placaVeiculo' in campos_obrigatorios %}is-invalid{% endif %}">
                  <div class="invalid-feedback">
                    {% if 'placaVeiculo' in
                    campos_obrigatorios
                    %}
                    {{ campos_obrigatorios['placaVeiculo'] }}
                    {% elif 'placaVeiculo' in campos_erros %}
                    {{ campos_erros['placaVeiculo'] }}
                    {% endif %}
                  </div>
                </div>
              </div>
              <div class="col-sm-3 col-md-2">
                <div class="mb-3">
                  <label class="form-label required">Motorista</label>
                  <input type="text" name="motoristaTicket" value="{{ solicitacao.motorista.nome_completo }}"
                    class="form-control {% if 'motoristaTicket' in campos_obrigatorios %}is-invalid{% endif %}">
                  <div class="invalid-feedback">
                    {% if 'motoristaTicket' in
                    campos_obrigatorios
                    %}
                    {{ campos_obrigatorios['motoristaTicket'] }}
                    {% elif 'motoristaTicket' in campos_erros %}
                    {{ campos_erros['motoristaTicket'] }}
                    {% endif %}
                  </div>
                </div>
              </div>
              <div class="col-sm-2 col-md-2">
                <div class="mb-3">
                  <label class="form-label required">Data entrega</label>
                  <input type="date" name="dataEntregaTicket" value="{{ dados_corretos['dataEntregaTicket'] }}"
                    class="form-control {% if 'dataEntregaTicket' in campos_obrigatorios %}is-invalid{% endif %}">
                  <div class="invalid-feedback">
                    {% if 'dataEntregaTicket' in
                    campos_obrigatorios
                    %}
                    {{ campos_obrigatorios['dataEntregaTicket'] }}
                    {% elif 'dataEntregaTicket' in campos_erros %}
                    {{ campos_erros['dataEntregaTicket'] }}
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12 col-md-6">
                <div class="mb-3">
                  <label class="form-label required">
                    Arquivo Ticket (JPG, JPEG ou PNG)
                    <button type="button" class="btn btn-icon btn-sm ms-1" data-bs-toggle="modal"
                      data-bs-target="#modalRecomendacoes" title="Ver recomendações">
                      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="icon text-warning">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path d="M12 16v-4"></path>
                        <path d="M12 8h.01"></path>
                      </svg>
                    </button>
                  </label>
                  <input type="file" name="arquivoTicket" value="{{ dados_corretos['arquivoTicket'] }}"
                    class="form-control {% if 'arquivoTicket' in campos_obrigatorios %}is-invalid{% endif %}"
                    accept=".jpg, .jpeg, .png">
                  <div class="invalid-feedback">
                    {% if 'arquivoTicket' in
                    campos_obrigatorios
                    %}
                    {{ campos_obrigatorios['arquivoTicket'] }}
                    {% elif 'arquivoTicket' in campos_erros %}
                    {{ campos_erros['arquivoTicket'] }}
                    {% endif %}
                  </div>

                  <!-- Alerta melhorado de extração automática -->
                  <div class="alert alert-warning d-flex align-items-start mt-3 mb-0 shadow-sm" role="alert"
                    style="border-left: 4px solid #F76707;">
                    <div class="flex-fill">
                      <h4 class="alert-title mb-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                          class="icon icon-tabler icons-tabler-outline icon-tabler-help-octagon">
                          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                          <path
                            d="M12.802 2.165l5.575 2.389c.48 .206 .863 .589 1.07 1.07l2.388 5.574c.22 .512 .22 1.092 0 1.604l-2.389 5.575c-.206 .48 -.589 .863 -1.07 1.07l-5.574 2.388c-.512 .22 -1.092 .22 -1.604 0l-5.575 -2.389a2.036 2.036 0 0 1 -1.07 -1.07l-2.388 -5.574a2.036 2.036 0 0 1 0 -1.604l2.389 -5.575c.206 -.48 .589 -.863 1.07 -1.07l5.574 -2.388a2.036 2.036 0 0 1 1.604 0z" />
                          <path d="M12 16v.01" />
                          <path d="M12 13a2 2 0 0 0 .914 -3.782a1.98 1.98 0 0 0 -2.414 .483" />
                        </svg>
                        Extração Automática Ativada
                      </h4>
                      <div class="text-secondary mb-2">
                        <small>
                          O sistema extrairá automaticamente os seguintes dados do ticket:
                        </small>
                      </div>
                      <div class="mb-2">
                        <span class="badge bg-warning-lt me-1">
                          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="icon me-1">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                            <path d="M14 3v4a1 1 0 0 0 1 1h4" />
                            <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" />
                            <path d="M9 17h6" />
                            <path d="M9 13h6" />
                          </svg>
                          Número da NF
                        </span>
                        <span class="badge bg-warning-lt me-1">
                          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="icon me-1">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                            <path
                              d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2" />
                            <path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z" />
                            <path d="M9 12h6" />
                            <path d="M9 16h6" />
                          </svg>
                          Peso Líquido
                        </span>
                        <span class="badge bg-warning-lt me-1">
                          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="icon me-1">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                            <path d="M4 5m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z" />
                            <path d="M16 3l0 4" />
                            <path d="M8 3l0 4" />
                            <path d="M4 11l16 0" />
                          </svg>
                          Data de Entrega
                        </span>
                        <span class="badge bg-warning-lt">
                          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="icon me-1">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                            <path d="M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" />
                            <path d="M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" />
                            <path d="M5 17h-2v-11a1 1 0 0 1 1 -1h9v12m-4 0h6m4 0h2v-6h-8m0 -5h5l3 5" />
                          </svg>
                          Placa do Veículo
                        </span>
                      </div>
                      <div class="alert alert-warning mb-0 py-2 px-3" style="font-size: 0.8125rem;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                          class="icon me-1">
                          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                          <path d="M12 9v4" />
                          <path
                            d="M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z" />
                          <path d="M12 16h.01" />
                        </svg>
                        <strong>Importante:</strong> Sempre verifique e confirme os dados extraídos antes de finalizar o
                        cadastro.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-footer text-center text-md-end">
              <a href="javascript:history.back()" class="btn btn-primary">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-arrow-left" width="24"
                  height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                  stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                  <path d="M5 12l14 0"></path>
                  <path d="M5 12l6 6"></path>
                  <path d="M5 12l6 -6"></path>
                </svg>
                Voltar
              </a>
              <button type="submit" class="btn btn-primary">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-plus" width="24" height="24"
                  viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
                  stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                  <path d="M12 5l0 14"></path>
                  <path d="M5 12l14 0"></path>
                </svg>
                Cadastrar
              </button>
            </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Recomendações -->
<div class="modal modal-blur fade" id="modalRecomendacoes" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">
          Recomendações para Extração Automática
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="mb-3 text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon me-1">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z" />
            <path d="M16 3v4" />
            <path d="M8 3v4" />
            <path d="M4 11h16" />
            <path d="M7 14h.013" />
            <path d="M10.01 14h.005" />
            <path d="M13.01 14h.005" />
            <path d="M16.015 14h.005" />
            <path d="M13.015 17h.005" />
            <path d="M7.01 17h.005" />
            <path d="M10.01 17h.005" />
          </svg>
          Qualidade da Imagem
        </p>
        <ul class="list-unstyled mb-4">
          <li class="mb-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="icon text-success me-2">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M5 12l5 5l10 -10" />
            </svg>
            <strong>Iluminação adequada:</strong> Evite sombras e reflexos sobre o documento
          </li>
          <li class="mb-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="icon text-success me-2">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M5 12l5 5l10 -10" />
            </svg>
            <strong>Imagem nítida:</strong> Certifique-se de que o texto está legível e sem desfoque
          </li>
          <li class="mb-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="icon text-success me-2">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M5 12l5 5l10 -10" />
            </svg>
            <strong>Documento completo:</strong> Capture todo o ticket na foto, sem cortes
          </li>
          <li class="mb-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="icon text-success me-2">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M5 12l5 5l10 -10" />
            </svg>
            <strong>Alinhamento correto:</strong> Mantenha o documento reto, evitando inclinações
          </li>
        </ul>

        <p class="mb-3 text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon me-1">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z" />
            <path d="M8 3v4" />
            <path d="M16 3v4" />
            <path d="M4 11h16" />
          </svg>
          Formato do Arquivo
        </p>
        <ul class="list-unstyled mb-4">
          <li class="mb-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="icon text-success me-2">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M5 12l5 5l10 -10" />
            </svg>
            Formatos aceitos: <span class="badge bg-primary-lt ms-1">JPG</span>
            <span class="badge bg-primary-lt">JPEG</span>
            <span class="badge bg-primary-lt">PNG</span>
          </li>
          <li class="mb-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="icon text-success me-2">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M5 12l5 5l10 -10" />
            </svg>
            Resolução mínima recomendada: <strong>1200 x 1600 pixels</strong>
          </li>
        </ul>

        <p class="mb-3 text-primary">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon me-1">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M14 3v4a1 1 0 0 0 1 1h4" />
            <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" />
            <path d="M9 14l6 0" />
            <path d="M9 17l3 0" />
          </svg>
          Dados Extraídos Automaticamente
        </p>
        <div class="row g-2 mb-3">
          <div class="col-md-6">
            <div class="card border-primary">
              <div class="card-body py-2">
                <div class="d-flex align-items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="icon icon-tabler icons-tabler-outline icon-tabler-clipboard">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2" />
                    <path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z" />
                  </svg>
                  <small class="text-muted">Número da Nota Fiscal</small>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card border-primary">
              <div class="card-body py-2">
                <div class="d-flex align-items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="icon icon-tabler icons-tabler-outline icon-tabler-weight">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M12 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                    <path
                      d="M6.835 9h10.33a1 1 0 0 1 .984 .821l1.637 9a1 1 0 0 1 -.984 1.179h-13.604a1 1 0 0 1 -.984 -1.179l1.637 -9a1 1 0 0 1 .984 -.821z" />
                  </svg>
                  <small class="text-muted">Peso Líquido (toneladas)</small>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card border-primary">
              <div class="card-body py-2">
                <div class="d-flex align-items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"
                    class="icon icon-tabler icons-tabler-filled icon-tabler-calendar-week">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path
                      d="M16 2c.183 0 .355 .05 .502 .135l.033 .02c.28 .177 .465 .49 .465 .845v1h1a3 3 0 0 1 2.995 2.824l.005 .176v12a3 3 0 0 1 -2.824 2.995l-.176 .005h-12a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-12a3 3 0 0 1 2.824 -2.995l.176 -.005h1v-1a1 1 0 0 1 .514 -.874l.093 -.046l.066 -.025l.1 -.029l.107 -.019l.12 -.007q .083 0 .161 .013l.122 .029l.04 .012l.06 .023c.328 .135 .568 .44 .61 .806l.007 .117v1h6v-1a1 1 0 0 1 1 -1m3 7h-14v9.625c0 .705 .386 1.286 .883 1.366l.117 .009h12c.513 0 .936 -.53 .993 -1.215l.007 -.16z" />
                    <path d="M9.015 13a1 1 0 0 1 -1 1a1.001 1.001 0 1 1 -.005 -2c.557 0 1.005 .448 1.005 1" />
                    <path d="M13.015 13a1 1 0 0 1 -1 1a1.001 1.001 0 1 1 -.005 -2c.557 0 1.005 .448 1.005 1" />
                    <path d="M17.02 13a1 1 0 0 1 -1 1a1.001 1.001 0 1 1 -.005 -2c.557 0 1.005 .448 1.005 1" />
                    <path d="M12.02 15a1 1 0 0 1 0 2a1.001 1.001 0 1 1 -.005 -2z" />
                    <path d="M9.015 16a1 1 0 0 1 -1 1a1.001 1.001 0 1 1 -.005 -2c.557 0 1.005 .448 1.005 1" />
                  </svg>
                  <small class="text-muted">Data de Entrega</small>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card border-primary">
              <div class="card-body py-2">
                <div class="d-flex align-items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="icon icon-tabler icons-tabler-outline icon-tabler-car">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" />
                    <path d="M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" />
                    <path d="M5 17h-2v-6l2 -5h9l4 5h1a2 2 0 0 1 2 2v4h-2m-4 0h-6m-6 -6h15m-6 0v-5" />
                  </svg>
                  <small class="text-muted">Placa do Veículo</small>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="alert alert-warning mb-0">
          <div class="d-flex">
            <div>
              <h4 class="alert-title">Atenção!</h4>
              <p class="mb-0">
                Mesmo com a extração automática, <strong>sempre confira os dados</strong> antes de finalizar o cadastro.
                O sistema pode não reconhecer corretamente alguns campos dependendo da qualidade da imagem.
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon me-1">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M5 12l5 5l10 -10" />
          </svg>
          Entendi
        </button>
      </div>
    </div>
  </div>
</div>

<script src="{{ url_for('static', filename='js/pages/ticket-upload.js') }}"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const fornecedorSelect = document.querySelector('#fornecedorIdentificacao');
    if (fornecedorSelect) {
      new TomSelect(fornecedorSelect, {
        create: false,
        allowEmptyOption: false,
        sortField: {
          field: "text",
          direction: "asc"
        }
      });
    }
  });
</script>

{% include 'estrutura/footer.html' %}

</div>

{% endblock conteudo %}